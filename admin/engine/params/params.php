<?phprequire ('engine/reference/functions.php');$body_admin .= '<div align="center"><table border=0><tr><td align="center">	<a href="index.php?do=params" style="text-decoration:none"><img src="'.$config ['site_url'].'images/admin/view.png"><br>	['.$lang[89].']</a></td><td align="center">	<a href="index.php?do=params&action=add" style="text-decoration:none"><img src="'.$config ['site_url'].'images/admin/add.png"><br>	['.$lang[52].']</a></td></tr></table></div>';/* <td align="center">	<img src="'.$config ['site_url'].'images/admin/statistics.png"><br>	[статистика]</td>*/if (!isset ($_GET['action'])){	$body_admin .= '	<script>$(document).ready(function() {		//select all the a tag with name equal to modal	$(\'a[name=modal]\').click(function(e) {		//Cancel the link behavior		e.preventDefault();		//Get the A tag		var id = $(this).attr(\'href\');			//Get the screen height and width		var maskHeight = $(document).height();		var maskWidth = $(window).width();			//Set heigth and width to mask to fill up the whole screen		$(\'#mask\').css({\'width\':maskWidth,\'height\':maskHeight});				//transition effect				$(\'#mask\').fadeIn(1000);			$(\'#mask\').fadeTo("slow",0.8);				//Get the window height and width		var winH = $(window).height();		var winW = $(window).width();              		//Set the popup window to center		$(id).css(\'top\',  winH/2-$(id).height()/2);		$(id).css(\'left\', winW/2-$(id).width()/2);			//transition effect		$(id).fadeIn(2000); 		});		//if close button is clicked	$(\'.window .close\').click(function (e) {		//Cancel the link behavior		e.preventDefault();		$(\'#mask, .window\').hide();	});				//if mask is clicked	$(\'#mask\').click(function () {		$(this).hide();		$(\'.window\').hide();	});				});</script><style>#mask {  position:absolute;  left:0;  top:0;  z-index:9000;  background-color:#000;  display:none;}#boxes .window {  position:absolute;  left:0;  top:0;  width:440px;  height:200px;  display:none;  z-index:9999;  padding:20px;}input.btn { 	  color:#050; 	  font: bold 84% \'trebuchet ms\',helvetica,sans-serif; 	  background-color:#fed; 	  border: 1px solid; 	  font-size:12px;	  border-color: #696 #363 #363 #696; 	  filter:progid:DXImageTransform.Microsoft.Gradient 	  (GradientType=0,StartColorStr=\'#ffffffff\',EndColorStr=\'#ffeeddaa\'); } </style>	';	if (!isset ($_POST['watermark']))	$_POST['watermark'] = 0;	if (isset ($_POST['edit_image']))	{		$sql = "UPDATE ls_params_image set			width='".$_POST['width']."',			height='".$_POST['height']."',			number_image='".$_POST['number_image']."',			watermark='".$_POST['watermark']."',			minsizewatermark='".$_POST['minsizewatermark']."',			sizethumb='".$_POST['sizethumb']."'				where id='".$_POST['id_edit']."';";		if (mysql_query ($sql))		{			$body_admin .= '<div align="center" style="font-size:16; color:green">'.$lang[109].'</div>';		} else {			$body_admin .= '<div align="center" style="font-size:16; color:red">'.$lang[110].'</div>';		}	}	if (isset ($_POST['edit_price']))	{		$sql = "UPDATE ls_params_price set convert_price='".$_POST['convert_price']."', reference_id='".$_POST['reference_id']."'  where id='".$_POST['id_edit']."';";		if (mysql_query ($sql))		{			$body_admin .= '<div align="center" style="font-size:16; color:green">'.$lang[109].'</div>';		} else {			$body_admin .= '<div align="center" style="font-size:16; color:red">'.$lang[110].'</div>';		}	}	if (isset ($_POST['edit_text']))	{		if (!isset ($_POST['more_lang']))		$_POST['more_lang'] = 0;		if (!isset ($_POST['wysiwyg']))		$_POST['wysiwyg'] = 0;		if (!isset ($_POST['multiline']))		$_POST['multiline'] = 0;		$sql = "UPDATE ls_params_text set more_lang='".$_POST['more_lang']."', wysiwyg='".$_POST['wysiwyg']."', multiline='".$_POST['multiline']."' where id='".$_POST['id_edit']."';";		if (mysql_query ($sql))		{			$body_admin .= '<div align="center" style="font-size:16; color:green">'.$lang[109].'</div>';		} else {			$body_admin .= '<div align="center" style="font-size:16; color:red">'.$lang[110].'</div>';		}	}	if (isset ($_POST['edit_select']))	{		$sql = "UPDATE ls_params_select set more_lang='".$_POST['more_lang']."',  multiselect='".$_POST['multiselect']."',  only_text='".$_POST['only_text']."', `position` = '".intval($_POST['position'])."' where id='".$_POST['id_edit']."';";		if (mysql_query ($sql))		{			$body_admin .= '<div align="center" style="font-size:16; color:green">'.$lang[109].'</div>';		} else {			$body_admin .= '<div align="center" style="font-size:16; color:red">'.$lang[110].'</div>';		}	}	if (isset ($_GET['type_params']))	{		switch ($_GET['type_params'])		{			case "text":				switch ($_GET['type_action'])				{					case "del":						$sql = "DELETE from ls_params_text where id = '".$_GET['id']."';";						mysql_query ($sql);						$sql = "DELETE from ls_translate where id_elements = '".$_GET['id']."' and type='text';";						mysql_query ($sql);					break;				}			break;			case "select":				switch ($_GET['type_action'])				{					case "del":						$sql = "DELETE from ls_params_select where id = '".$_GET['id']."';";						mysql_query ($sql);						$sql = "DELETE from ls_translate where id_elements = '".$_GET['id']."' and type='select';";						mysql_query ($sql);						$sql = "DELETE from ls_params_select_values where id_params = '".$_GET['id']."';";						mysql_query ($sql);					break;				}			break;			case "price":				switch ($_GET['type_action'])				{					case "del":						$sql = "DELETE from ls_params_price where id = '".$_GET['id']."';";						mysql_query ($sql);						$sql = "DELETE from ls_translate where id_elements = '".$_GET['id']."' and type='price';";						mysql_query ($sql);					break;				}			break;			case "image":				switch ($_GET['type_action'])				{					case "del":						$sql = "DELETE from ls_params_image where id = '".$_GET['id']."';";						mysql_query ($sql);						$sql = "DELETE from ls_translate where id_elements = '".$_GET['id']."' and type='image';";						mysql_query ($sql);					break;				}			break;			case "boolean":				switch ($_GET['type_action'])				{					case "del":						$sql = "DELETE from ls_params_boolean where id = '".$_GET['id']."';";						mysql_query ($sql);						$sql = "DELETE from ls_translate where id_elements = '".$_GET['id']."' and type='boolean';";						mysql_query ($sql);					break;				}			break;		}	}	$body_admin .= '	<h2>'.$lang[75].'</h2>	';	$array_text_params = return_all_text_params();	if ($array_text_params)	{		$body_admin .= '		<div align="center">		<table cellspacing="1" class="table table-bordered table-striped" width="100%">		 <thead>		<tr> 			<th width="25">'.$lang[27].'</th> 			<th>'.$lang[28].'</th> 			<th width="50">'.$lang[104].'</th>			<th width="50">'.$lang[113].'</th>			<th width="150">'.$lang[123].'</th> 			<th width="25">'.$lang[35].'</th>			<th width="25">'.$lang[105].'</th>		</tr> 		 </thead> 		  <tbody> 		';		foreach ($array_text_params as $key=>$v)		{			switch ($v['more_lang'])			{				case 1:				$html_more_lang = '<img src="'.$config ['site_url'].'images/admin/green.png">';				break;				case 0:				$html_more_lang = '<img src="'.$config ['site_url'].'images/admin/red.png">';				break;			}			switch ($v['multiline'])			{				case 1:				$html_multiline = '<img src="'.$config ['site_url'].'images/admin/green.png">';				break;				case 0:				$html_multiline = '<img src="'.$config ['site_url'].'images/admin/red.png">';				break;			}			switch ($v['wysiwyg'])			{				case 1:				$html_wysiwyg = '<img src="'.$config ['site_url'].'images/admin/green.png">';				break;				case 0:				$html_wysiwyg = '<img src="'.$config ['site_url'].'images/admin/red.png">';				break;			}			$name_text_params_array = return_name_for_id_text_param ($id_online_lang, $v['id']);			if (strlen($name_text_params_array['text'])>0)			{				$name_text_params = $name_text_params_array['text'];			} else {				$name_text_params = $lang[106];			}			$sql = "select * from `ls_cardparam` where `id_param` = '".$v['id']."' and `db_type` = 'text' LIMIT 0,1;";			$results = mysql_query ($sql);			$number = @mysql_num_rows ($results);			if (!$number)			{				$delete_html = '<a href="index.php?do=params&type_params=text&type_action=del&id='.$v['id'].'" onclick="return confirm (\''.$lang[69].'\')"><img src="'.$config ['site_url'].'images/admin/remove_16.png"></a>';			} else {				$delete_html = '<b>USED</b>';			}			$body_admin .= '			<tr>			<td align="center">'.$v['id'].'</td>			<td>'.$name_text_params.' <a href="index.php?do=params&action=translate&type=text&type_2=param&id='.$v['id'].'"><img src="'.$config ['site_url'].'images/admin/locale_add.png"></a></td>			<td align="center">'.$html_more_lang.'</td>			<td align="center">'.$html_multiline.'</td>			<td align="center">'.$html_wysiwyg.'</td>			<td align="center"><a href="#dialog'.$key.'" name="modal"><img src="'.$config ['site_url'].'images/admin/edit.png"></a></td>			<td align="center">'.$delete_html.'</td>			</tr>			';			if ($v['more_lang']!=1)			{				$cheked = '';			} else {				$cheked = 'checked';			}			if ($v['multiline']!=1)			{				$cheked_multiline = '';			} else {				$cheked_multiline = 'checked';			}			if ($v['wysiwyg']!=1)			{				$cheked_wysiwyg = '';			} else {				$cheked_wysiwyg = 'checked';			}			$modal .= '			<div id="dialog'.$key.'" class="window" style="				  background:url(./../images/admin/notice_476.png) no-repeat 0 0 transparent; 			  width:476px; 			  height:329px;			  padding:70px 0 0px 0px;				" align="center">			 <form id="form_'.$key.'" action="" method="POST">			 <input type="hidden" name="edit_text" value="1">			 <input type="hidden" name="id_edit" value="'.$v['id'].'">			 <table border="0" width="100">			 <tr>			 <td colspan="2" align="center" style="font-size:16px; font-weight: bold;">'.$lang[108].'</td>			 </tr>			 <tr>				 <td>'.$lang[86].':</td>				<td><input type="checkbox" name="more_lang" value="1" class="form_params" '.$cheked.'><a href="#"  title="'.$lang[87].'" displayclass="notice" class="tooltip" style="text-decoration:none;"><img src="'.$config ['site_url'].'images/admin/help_16.png"></a></td>			 </tr>			 <tr>				<td>'.$lang[113].':</td>				<td><input type="checkbox" name="multiline" value="1" class="form_params" '.$cheked_multiline.'></td>			</tr>			<tr>				<td>'.$lang[123].':</td>				<td><input type="checkbox" name="wysiwyg" value="1" class="form_params" '.$cheked_wysiwyg.'></td>			</tr>			 <tr>			 <td colspan="2" align="center"><input type="submit" name="submit" value="'.$lang[45].'" class="btn"></td>			 </tr>			 </table>			 </form>			</div>			';			unset ($cheked);		}		$body_admin .= '		</tbody>		</table>		</div>		';	} else {		$body_admin .= $lang[107];	}	//Дальше вывод таблицы с параметрами типа "ВЫБОР"	$body_admin .= '	<h2>'.$lang[114].'</h2>	';	$array_select_params = return_all_select_params();	if ($array_select_params)	{		$body_admin .= '		<div align="center">		<table cellspacing="1" class="table table-bordered table-striped" width="100%">		 <thead>		<tr> 			<th width="25">'.$lang[27].'</th> 			<th>'.$lang[28].'</th> 			<th width="50">'.$lang[104].'</th>			<th width="150">'.$lang[115].'</th>			<th width="150">'.$lang[118].'</th>			<th width="100">'.$lang[120].'</th>			<th width="25">'.$lang[302].'</th>			<th width="25">'.$lang[35].'</th>			<th width="25">'.$lang[105].'</th>		</tr> 		 </thead> 		  <tbody> 		';		foreach ($array_select_params as $key=>$v)		{			$name_select_params_array = return_name_for_id_select_param ($id_online_lang, $v['id']);			switch ($v['more_lang'])			{				case 1:				$html_more_lang = '<img src="'.$config ['site_url'].'images/admin/green.png">';				break;				case 0:				$html_more_lang = '<img src="'.$config ['site_url'].'images/admin/red.png">';				break;			}			switch ($v['multiselect'])			{				case 1:				$html_multiselect = '<img src="'.$config ['site_url'].'images/admin/green.png">';				break;				case 0:				$html_multiselect = '<img src="'.$config ['site_url'].'images/admin/red.png">';				break;			}			switch ($v['only_text'])			{				case 1:				$html_only_text = '<img src="'.$config ['site_url'].'images/admin/green.png">';				break;				case 0:				$html_only_text = '<img src="'.$config ['site_url'].'images/admin/red.png">';				break;			}			if (strlen($name_select_params_array['text'])>0)			{				$name_text_params = $name_select_params_array['text'];			} else {				$name_text_params = $lang[106];			}			if ($v['more_lang']==1)			{				if (!chek_values_select_text ($v['id'], 0))				{					$html_to_translate = '<a href="index.php?do=params&action=translate&type=select&type_2=value&id='.$v['id'].'"><img src="'.$config ['site_url'].'images/admin/locale_add.png"></a>					<a href="index.php?do=params&action=view_value_text&type=select&type_2=value&id='.$v['id'].'"><img src="'.$config ['site_url'].'images/admin/view_value.png"></a>';				} else {					$html_to_translate = '<a href="index.php?do=params&action=view_value&type=select&type_2=value&id='.$v['id'].'"><img src="'.$config ['site_url'].'images/admin/view_value.png"></a>';				}			} else {				if (!chek_values_select_text ($v['id'], 0))				{					$html_to_translate = '<a href="index.php?do=params&action=view_value_text&type=select&type_2=value&id='.$v['id'].'"><img src="'.$config ['site_url'].'images/admin/view_value.png"></a>';				} else {					$html_to_translate = '<a href="index.php?do=params&action=view_value&type=select&type_2=value&id='.$v['id'].'"><img src="'.$config ['site_url'].'images/admin/view_value.png"></a>';				}			}			$sql = "select * from `ls_cardparam` where `id_param` = '".$v['id']."' and `db_type` = 'select' LIMIT 0,1;";			$results = mysql_query ($sql);			$number = @mysql_num_rows ($results);			if (!$number)			{				$delete_html = '<a href="index.php?do=params&type_params=select&type_action=del&id='.$v['id'].'" onclick="return confirm (\''.$lang[69].'\')"><img src="'.$config ['site_url'].'images/admin/remove_16.png"></a>';			} else {				$delete_html = '<b>USED</b>';			}			if ($v['parent_id'])			{				$translate_parent_param = return_one_translate ($v['parent_id'], $id_online_lang, 'select');				$parent = '<b>'.$translate_parent_param['text'].'</b>';			} else {				$parent = '<b>-</b> ';			}			$body_admin .= '			<tr>			<td align="center">'.$v['id'].'</td>			<td>'.$name_text_params.' <a href="index.php?do=params&action=translate&type=select&type_2=param&id='.$v['id'].'"><img src="'.$config ['site_url'].'images/admin/locale_add.png"></a></td>			<td align="center">'.$html_more_lang.'</td>			<td align="center">'.$html_multiselect.'</td>			<td align="center">'.$html_only_text.'</td>			<td align="center">				<a href="index.php?do=params&action=add_select_params&id='.$v['id'].'"><img src="'.$config ['site_url'].'images/admin/add_16.png"></a>				'.$html_to_translate.' 			</td>			<td align="center" width="200"><div id="parent_div_'.$v['id'].'">'.$parent.'<img src="'.$config ['site_url'].'images/admin/edit.png" onclick="change_parent(\''.$v['id'].'\')"><br></div></td>			<td align="center"><a href="#select_dialog'.$key.'" name="modal"><img src="'.$config ['site_url'].'images/admin/edit.png"></a></td>			<td align="center">'.$delete_html.'</td>			</tr>			';			unset ($html_to_translate);			if ($v['more_lang']!=1)			{				$cheked_lang = '';			} else {				$cheked_lang = 'checked';			}			if ($v['multiselect']!=1)			{				$cheked_multiselect = '';			} else {				$cheked_multiselect = 'checked';			}			if ($v['only_text']!=1)			{				$cheked_only_text = '';			} else {				$cheked_only_text = 'checked';			}			$modal .= '			<div id="select_dialog'.$key.'" class="window" style="				  background:url(./../images/admin/notice.png) no-repeat 0 0 transparent; 			  width:326px; 			  height:229px;			  padding:50px 0 20px 25px;				" align="center">			 <form id="form_'.$key.'" action="" method="POST">			 <input type="hidden" name="edit_select" value="1">			 <input type="hidden" name="id_edit" value="'.$v['id'].'">			 <table border="0" width="250">			 <tr>				 <td colspan="2" align="center" style="font-size:16px; font-weight: bold;">'.$lang[108].'</td>			 </tr>			<tr>				<td>'.$lang[86].':</td>				<td>                                    <input type="checkbox" name="more_lang" value="1" class="form_params" '.$cheked_lang.'>                                    <a href="#"  title="'.$lang[87].'" displayclass="notice" class="tooltip" style="text-decoration:none;">                                        <img src="'.$config ['site_url'].'images/admin/help_16.png">                                    </a>                                </td>			</tr>                        <tr>				<td>'.$lang[115].':</td>				<td>                                    <input type="checkbox" name="multiselect" value="1" class="form_params" '.$cheked_multiselect.'>                                    <a href="#"  title="'.$lang[116].'" displayclass="notice" class="tooltip" style="text-decoration:none;">                                        <img src="'.$config ['site_url'].'images/admin/help_16.png">                                    </a>                                </td>			</tr>			<tr>				<td>'.$lang[118].':</td>				<td>                                    <input type="checkbox" name="only_text" value="1" class="form_params" '.$cheked_only_text.'>                                    <a href="#"  title="'.$lang[119].'" displayclass="notice" class="tooltip" style="text-decoration:none;">                                        <img src="'.$config ['site_url'].'images/admin/help_16.png">                                    </a>                                </td>			</tr>			<tr>			    <td>Порядковий номер:</td>			    <td><input type="text" class="form-control" value="'.$v['position'].'" name="position"></td>			</tr>			<tr>				<td colspan="2" align="center"><input type="submit" name="submit" value="'.$lang[45].'" class="btn"></td>			</tr>			 </table>			 </form>			</div>			';		}		$body_admin .= '		</tbody>		</table>		</div>		';	} else {		$body_admin .= $lang[121];	}	//Дальше вывод таблицы с денежными параметрами	$body_admin .= '	<h2>'.$lang[148].'</h2>	';	$array_select_params = return_all_price_params();	if ($array_select_params)	{		$body_admin .= '		<div align="center">		<table cellspacing="1" class="table table-bordered table-striped" width="100%">		 <thead>		<tr> 			<th width="25">'.$lang[27].'</th> 			<th>'.$lang[28].'</th> 			<th width="150">'.$lang[149].'</th>			<th width="200">'.$lang[151].'</th>			<th width="25">'.$lang[35].'</th>			<th width="25">'.$lang[105].'</th>		</tr> 		 </thead> 		  <tbody> 		';		foreach ($array_select_params as $key=>$v)		{			switch ($v['convert_price'])			{				case 1:				$html_convert_price = '<img src="'.$config ['site_url'].'images/admin/green.png">';				break;				case 0:				$html_convert_price = '<img src="'.$config ['site_url'].'images/admin/red.png">';				break;			}			$name_select_params_array = return_name_for_id_price_param ($id_online_lang, $v['id']);			if (strlen($name_select_params_array['text'])>0)			{				$name_text_params = $name_select_params_array['text'];			} else {				$name_text_params = $lang[106];			}			$reference_id = $v['reference_id'];			if ($reference_id!=0)			{				$reference_name = return_one_reference_for_id($reference_id);				$reference_name = '<a href="index.php?do=reference">'.$reference_name['name'].'</a>';			} else {				$reference_name = $lang[152];			}			$sql = "select * from `ls_cardparam` where `id_param` = '".$v['id']."' and `db_type` = 'price' LIMIT 0,1;";			$results = mysql_query ($sql);			$number = @mysql_num_rows ($results);			if (!$number)			{				$delete_html = '<a href="index.php?do=params&type_params=price&type_action=del&id='.$v['id'].'" onclick="return confirm (\''.$lang[69].'\')"><img src="'.$config ['site_url'].'images/admin/remove_16.png"></a>';			} else {				$delete_html = '<b>USED</b>';			}			$body_admin .= '			<tr>			<td align="center">'.$v['id'].'</td>			<td>'.$name_text_params.' <a href="index.php?do=params&action=translate&type=price&id='.$v['id'].'"><img src="'.$config ['site_url'].'images/admin/locale_add.png"></a></td>			<td align="center">'.$html_convert_price.'</td>			<td align="center"><b>'.$reference_name.'</b></td>			<td align="center"><a href="#price_dialog'.$key.'" name="modal"><img src="'.$config ['site_url'].'images/admin/edit.png"></a></td>			<td align="center">'.$delete_html.'</td>			</tr>			';			unset ($delete_html);			$array_reference = return_all_reference ();			foreach ($array_reference as $val_ref)			{				if ($val_ref['id']==$v['reference_id'])				{					$select_reference .= '<option value="'.$val_ref['id'].'" selected>'.$val_ref['name'].'</option>';				} else {					$select_reference .= '<option value="'.$val_ref['id'].'">'.$val_ref['name'].'</option>';				}			}			if ($v['convert_price']!=1)			{				$cheked_convert_price = '';			} else {				$cheked_convert_price = 'checked';			}			$modal .= '			<div id="price_dialog'.$key.'" class="window" style="				  background:url(./../images/admin/notice.png) no-repeat 0 0 transparent; 			  width:326px; 			  height:229px;			  padding:50px 0 20px 25px;				" align="center">			 <form id="form_'.$key.'" action="" method="POST">			 <input type="hidden" name="edit_price" value="1">			 <input type="hidden" name="id_edit" value="'.$v['id'].'">			 <table border="0" width="250">			 <tr>				 <td colspan="2" align="center" style="font-size:16px; font-weight: bold;">'.$lang[108].'</td>			 </tr>			<tr>				<td>'.$lang[146].':</td>				<td>                                    <input type="checkbox" name="convert_price" value="1" class="form_params" '.$cheked_convert_price.'>                                </td>			</tr>			<tr>				<td>'.$lang[142].':</td>				<td>					<select name="reference_id">					<option value="">'.$lang[144].'</option>					'.$select_reference.'					</select>                                </td>			</tr>			<tr>				<td colspan="2" align="center"><input type="submit" name="submit" value="'.$lang[45].'" class="btn"></td>			</tr>			 </table>			 </form>			</div>			';		}		$body_admin .= '		</tbody>		</table>		</div>		';	} else {		$body_admin .= $lang[121];	}	//Вывод всех параметров изображение	$body_admin .= '	<h2>'.$lang[162].'</h2>	';	$array_select_params = return_all_image_params();	if ($array_select_params)	{		$body_admin .= '		<div align="center">		<table cellspacing="1" class="table table-bordered table-striped" width="100%">		 <thead>		<tr> 			<th width="25">'.$lang[27].'</th> 			<th>'.$lang[28].'</th>			<th>'.$lang[154].'</th>			<th>'.$lang[155].'</th>			<th>'.$lang[156].'</th>			<th>'.$lang[157].'</th>			<th width="25">'.$lang[35].'</th>			<th width="25">'.$lang[105].'</th>		</tr> 		 </thead> 		  <tbody> 		';		foreach ($array_select_params as $key=>$v)		{			switch ($v['watermark'])			{				case 1:				$watermark_html = '<img src="'.$config ['site_url'].'images/admin/green.png">';				break;				case 0:				$watermark_html = '<img src="'.$config ['site_url'].'images/admin/red.png">';				break;			}			$name_select_params_array = return_name_for_id_image_param ($id_online_lang, $v['id']);			if (strlen($name_select_params_array['text'])>0)			{				$name_text_params = $name_select_params_array['text'];			} else {				$name_text_params = $lang[106];			}			if (isset ($v['reference_id']))			{				$reference_id = $v['reference_id'];			}			if ($reference_id!=0)			{				$reference_name = return_one_reference_for_id($reference_id);				$reference_name = '<a href="index.php?do=reference">'.$reference_name['name'].'</a>';			} else {				$reference_name = $lang[152];			}			$sql = "select * from `ls_cardparam` where `id_param` = '".$v['id']."' and `db_type` = 'image' LIMIT 0,1;";			$results = mysql_query ($sql);			$number = @mysql_num_rows ($results);			if (!$number)			{				$delete_html = '<a href="index.php?do=params&type_params=image&type_action=del&id='.$v['id'].'" onclick="return confirm (\''.$lang[69].'\')"><img src="'.$config ['site_url'].'images/admin/remove_16.png"></a>';			} else {				$delete_html = '<b>USED</b>';			}			$body_admin .= '			<tr>			<td align="center">'.$v['id'].'</td>			<td>'.$name_text_params.' <a href="index.php?do=params&action=translate&type=image&id='.$v['id'].'"><img src="'.$config ['site_url'].'images/admin/locale_add.png"></a></td>			<td align="center">'.$v['width'].'</td>			<td align="center">'.$v['height'].'</td>			<td align="center">'.$v['number_image'].'</td>			<td align="center">'.$watermark_html.'</td>			<td align="center"><a href="#image_dialog'.$key.'" name="modal"><img src="'.$config ['site_url'].'images/admin/edit.png"></a></td>			<td align="center">'.$delete_html.'</td>			</tr>			';			$array_reference = return_all_reference ();			foreach ($array_reference as $val_ref)			{				if (isset ($v['reference_id']) and $val_ref['id']==$v['reference_id'])				{					$select_reference .= '<option value="'.$val_ref['id'].'" selected>'.$val_ref['name'].'</option>';				} else {					$select_reference .= '<option value="'.$val_ref['id'].'">'.$val_ref['name'].'</option>';				}			}			if ($v['watermark']!=1)			{				$checked_watermark = '';			} else {				$checked_watermark = 'checked';			}			if (isset ($_POST['type_params']))			{				$type_params = $_POST['type_params'];			} else {				$type_params = '';			}			$modal .= '			<div id="image_dialog'.$key.'" class="window" style="				  background:url(./../images/admin/notice_476.png) no-repeat 0 0 transparent; 			  width:326px; 			  height:229px;			  padding:50px 0 20px 25px;				" align="center">			 <form id="form_'.$key.'" action="" method="POST">			 <input type="hidden" name="edit_image" value="1">			 <input type="hidden" name="id_edit" value="'.$v['id'].'">			 <table border="0" cellspacing="0" cellpadding="0">			<tr>			    <td>'.$lang[154].':</td>			    <td>				<input type="text" name="width" size="7" value="'.$v['width'].'">			    </td>			</tr>			<tr>			    <td>'.$lang[155].':</td>			    <td>				<input type="text" name="height" size="7" value="'.$v['height'].'">			    </td>			</tr>			<tr>			    <td>'.$lang[156].':</td>			    <td>				<input type="text" name="number_image" size="2" value="'.$v['number_image'].'">			    </td>			</tr>			<tr>			    <td>'.$lang[157].'</td>			    <td>				<input type="checkbox" name="watermark" value="1" '.$checked_watermark.'>			    </td>			</tr>			<tr>			    <td>'.$lang[158].'</td>			    <td>				<input type="text" name="minsizewatermark" size="2" value="'.$v['minsizewatermark'].'">			    </td>			</tr>			<tr>			    <td>'.$lang[159].'</td>			    <td>				<input type="text" name="sizethumb" size="5" value="'.$v['sizethumb'].'"><br>			    </td>			</tr>			<tr>			    <td align="center" colspan="2">				<input type="hidden" name="type_params" value="'.$type_params.'">				<input type="submit" name="submit" value="'.$lang[145].'">			    </td>			</tr>		    </table>			 </form>			</div>			';		}		$body_admin .= '		</tbody>		</table>		</div>		';	} else {		$body_admin .= $lang[121];	}	//Вывод всех двозначных параметров	$body_admin .= '	<h2>'.$lang[165].'</h2>	';	$array_select_params = return_all_boolean_params();	if ($array_select_params)	{		$body_admin .= '		<div align="center">		<table cellspacing="1" class="table table-bordered table-striped" width="100%">		 <thead>		<tr> 			<th width="25">'.$lang[27].'</th> 			<th>'.$lang[28].'</th>			<th width="25">'.$lang[105].'</th>		</tr> 		 </thead> 		  <tbody> 		';		foreach ($array_select_params as $key=>$v)		{			switch ($v['watermark'])			{				case 1:				$watermark_html = '<img src="'.$config ['site_url'].'images/admin/green.png">';				break;				case 0:				$watermark_html = '<img src="'.$config ['site_url'].'images/admin/red.png">';				break;			}			$name_select_params_array = return_name_for_id_boolean_param ($id_online_lang, $v['id']);			if (strlen($name_select_params_array['text'])>0)			{				$name_text_params = $name_select_params_array['text'];			} else {				$name_text_params = $lang[106];			}			$sql = "select * from `ls_cardparam` where `id_param` = '".$v['id']."' and `db_type` = 'boolean' LIMIT 0,1;";			$results = mysql_query ($sql);			$number = @mysql_num_rows ($results);			if (!$number)			{				$delete_html = '<a href="index.php?do=params&type_params=boolean&type_action=del&id='.$v['id'].'" onclick="return confirm (\''.$lang[69].'\')"><img src="'.$config ['site_url'].'images/admin/remove_16.png"></a>';			} else {				$delete_html = '<b>USED</b>';			}			$body_admin .= '			<tr>			<td align="center">'.$v['id'].'</td>			<td>'.$name_text_params.' <a href="index.php?do=params&action=translate&type=boolean&id='.$v['id'].'"><img src="'.$config ['site_url'].'images/admin/locale_add.png"></a></td>			<td align="center">'.$delete_html.'</td>			</tr>			';			$array_reference = return_all_reference ();			foreach ($array_reference as $val_ref)			{				if ($val_ref['id']==$v['reference_id'])				{					$select_reference .= '<option value="'.$val_ref['id'].'" selected>'.$val_ref['name'].'</option>';				} else {					$select_reference .= '<option value="'.$val_ref['id'].'">'.$val_ref['name'].'</option>';				}			}			if ($v['watermark']!=1)			{				$checked_watermark = '';			} else {				$checked_watermark = 'checked';			}			$modal .= '			<div id="image_dialog'.$key.'" class="window" style="				  background:url(./../images/admin/notice_476.png) no-repeat 0 0 transparent; 			  width:326px; 			  height:229px;			  padding:50px 0 20px 25px;				" align="center">			 <form id="form_'.$key.'" action="" method="POST">			 <input type="hidden" name="edit_image" value="1">			 <input type="hidden" name="id_edit" value="'.$v['id'].'">			 <table border="0" cellspacing="0" cellpadding="0">			<tr>			    <td>'.$lang[154].':</td>			    <td>				<input type="text" name="width" size="7" value="'.$v['width'].'">			    </td>			</tr>			<tr>			    <td>'.$lang[155].':</td>			    <td>				<input type="text" name="height" size="7" value="'.$v['height'].'">			    </td>			</tr>			<tr>			    <td>'.$lang[156].':</td>			    <td>				<input type="text" name="number_image" size="2" value="'.$v['number_image'].'">			    </td>			</tr>			<tr>			    <td>'.$lang[157].'</td>			    <td>				<input type="checkbox" name="watermark" value="1" '.$checked_watermark.'>			    </td>			</tr>			<tr>			    <td>'.$lang[158].'</td>			    <td>				<input type="text" name="minsizewatermark" size="2" value="'.$v['minsizewatermark'].'">			    </td>			</tr>			<tr>			    <td>'.$lang[159].'</td>			    <td>				<input type="text" name="sizethumb" size="5" value="'.$v['sizethumb'].'"><br>			    </td>			</tr>			<tr>			    <td align="center" colspan="2">				<input type="hidden" name="type_params" value="'.$_POST['type_params'].'">				<input type="submit" name="submit" value="'.$lang[145].'">			    </td>			</tr>		    </table>			 </form>			</div>			';		}		$body_admin .= '		</tbody>		</table>		</div>		';	} else {		$body_admin .= $lang[121];	}	$modal .= '</div>';	$modal = '<div id="boxes">	'.$modal.'	</div>	<div id="mask"></div>	';} else {	switch($_GET['action'])	{		case "add":			require ('engine/params/action/add.php');		break;		case "translate":			require ('engine/params/action/translate.php');		break;		case "add_select_params":			require ('engine/params/action/add_select_params.php');		break;		case "view_value":			require ('engine/params/action/view_value_img.php');		break;		case "view_value_text":			require ('engine/params/action/view_value_text.php');		break;	}}$body_admin = '<div id="info_admin_page"><img src="'.$config ['site_url'].'images/admin/rightarrow.png">'.$lang[40].$other_way.'</div>'.$body_admin;?>